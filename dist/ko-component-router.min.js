!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("knockout")):"function"==typeof define&&define.amd?define(["knockout"],e):"object"==typeof exports?exports["ko-component-router"]=e(require("knockout")):t["ko-component-router"]=e(t.ko)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=r(1),o=n(i),a=r(2),u=n(a);r(14),o["default"].components.register("ko-component-router",{viewModel:u["default"],template:"<div data-bind='if: ctx.route().component'>\n      <div class=\"component-wrapper\" data-bind='component: {\n        name: ctx.route().component,\n        params: ctx\n      }'></div>\n    </div>"})},function(e,r){e.exports=t},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var r=e.element,n=f["default"].contextFor(r);return new b(r,n,f["default"].toJS(t))}function a(t){return t=t||window.event,null===t.which?t.button:t.which}function u(){}function s(t){var e=location.protocol+"//"+location.hostname;return location.port&&(e+=":"+location.port),t&&0===t.indexOf(e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(1),f=n(l),p=r(3),d=n(p),h=r(11),y=n(h),v=r(9),g=!(0,v.isUndefined)(document)&&document.ontouchstart?"touchstart":"click",b=function(){function t(e,r,n){var o=n.routes,a=n.base,s=void 0===a?"":a,c=n.hashbang,l=void 0===c?!1:c,f=n.inTransition,p=void 0===f?u:f,h=n.outTransition,v=void 0===h?u:h,b=n.persistState,m=void 0===b?!1:b,x=n.persistQuery,w=void 0===x?!1:x;i(this,t);for(var O in o)o[O]=new y["default"](O,o[O]);this.config={el:e,base:s,hashbang:l,routes:o,inTransition:p,outTransition:v,persistState:m,persistQuery:w},this.ctx=new d["default"](r,this.config),this.onpopstate=this.onpopstate.bind(this),this.onclick=this.onclick.bind(this),window.addEventListener("popstate",this.onpopstate,!1),document.addEventListener(g,this.onclick,!1);var k=!0;if(this.ctx.$parent&&(k=this.ctx.$parent.path()!==this.ctx.$parent.canonicalPath()),k){var j=this.config.hashbang&&~location.hash.indexOf("#!")?location.hash.substr(2)+location.search:location.pathname+location.search+location.hash;this.dispatch({path:j})}}return c(t,[{key:"dispatch",value:function(t){var e=t.path,r=t.state,n=t.pushState,i=void 0===n?!1:n;return 0===e.toLowerCase().indexOf(this.config.base.toLowerCase())&&(e=e.substr(this.config.base.length)||"/"),this.ctx.update(e,r,i,!1)}},{key:"onpopstate",value:function(t){var e=t.state;this.dispatch({path:location.pathname+location.search+location.hash,state:(e||{})[this.ctx.config.depth+this.ctx.pathname()]})}},{key:"onclick",value:function(t){if(!(1!==a(t)||t.metaKey||t.ctrlKey||t.shiftKey)){for(var e=t.target;e&&"A"!==e.nodeName;)e=e.parentNode;if(e&&"A"===e.nodeName){var r=e.hasAttribute("download"),n=e.hasAttribute("target"),i="external"===e.getAttribute("rel"),o=~(e.getAttribute("href")||"").indexOf("mailto:"),u=!s(e.href),c="#"===e.getAttribute("href");if(!(r||n||i||o||u||c)){var l=e.pathname+e.search+(e.hash||""),f=l,p=this.config.base.replace("/#!","");0===l.toLowerCase().indexOf(p.toLowerCase())&&(l=l.substr(p.length)),this.config.hashbang&&(l=l.replace("/#!","")),this.config.base&&f===l||this.dispatch({path:l,pushState:!0})&&t.preventDefault()}}}}},{key:"dispose",value:function(){document.removeEventListener(g,this.onclick,!1),window.removeEventListener("popstate",this.onpopstate,!1),this.ctx.destroy()}}]),t}();e["default"]={createViewModel:o}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(s){i=!0,o=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(1),s=n(u),c=r(4),l=n(c),f=r(8),p=r(10),d=r(9),h=function(){function t(e,r){i(this,t),e.$router=this;for(var n=e,o=!0;n.$parentContext;){if(n=n.$parentContext,n.$router){o=!1;break}n.$router=this}o?s["default"].router=this:(this.$parent=n.$router,this.$parent.$child=this,r.base=this.$parent.pathname()),this.config=r,this.config.depth=t.getDepth(this),this.isNavigating=s["default"].observable(!0),this.route=s["default"].observable(""),this.canonicalPath=s["default"].observable(""),this.path=s["default"].observable(""),this.pathname=s["default"].observable(""),this.hash=s["default"].observable(""),this.params={},this.query=(0,f.factory)(this),this.state=(0,p.factory)(this)}return a(t,[{key:"update",value:function(){function e(t){var e=this,r=this.config.el.getElementsByClassName("component-wrapper")[0];delete $.query,(0,d.extend)(this,$),a&&this.query.update(a,w),this.isNavigating(!1),s["default"].tasks.runEarly(),t&&s["default"].tasks.schedule(function(){return e.config.inTransition(r,y,$)})}var r=arguments.length<=0||void 0===arguments[0]?this.canonicalPath():arguments[0],n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],a=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],u=(r+"").replace("/#!","");if(0===u.indexOf("./"))u=u.replace("./","/");else for(var c=this;c&&u.indexOf(c.config.base)>-1;)u=u.replace(c.config.base,""),c=c.$parent;var f=this.getRouteForUrl(u),p=""===this.route();if(!f){var h;return this.$parent?(h=this.$parent).update.apply(h,arguments):!1}var y=s["default"].toJS({route:this.route,path:this.path,pathname:this.pathname,canonicalPath:this.canonicalPath,hash:this.hash,state:this.state,params:this.params,query:this.query.getAll(!1,this.pathname())}),v=f.parse(u),g=o(v,6),b=g[0],m=g[1],x=g[2],w=g[3],O=g[4],k=g[5],j=this.pathname()===w;j||p||(this.isNavigating(!0),this.reload()),!a&&O&&(a=l["default"].parse(O)[this.config.depth+w]);var A=t.getCanonicalPath(t.getBase(this).replace(/\/$/,""),w,k,this.query.getFullQueryString(a,w),x),$={route:f,path:b,pathname:w,canonicalPath:A,hash:x,params:m,query:a};return n===!1&&j?(0,d.extend)($,{state:y.state},!1):!this.config.persistState&&n&&($.state=n),this.config.persistState&&($.state=this.state()),history[i?"pushState":"replaceState"](history.state,document.title,""===A?t.getBase(this):A),p?e.call(this,!0):j?this.$child?(this.$child.update(k||"/",{},!1,{}),e.call(this)):e.call(this):(this.config.outTransition(this.config.el,y,$,e.bind(this)),4!==this.config.outTransition.length&&e.call(this,!0)),!0}},{key:"getRouteForUrl",value:function(t){var e=t.split("#")[0].split("?")[0],r=void 0,n=1/0;for(var i in this.config.routes){var o=this.config.routes[i];if(o.matches(e)){if(0===o._keys.length)return o;(n===1/0||o._keys.length<n&&".*"!==o._keys[0].pattern)&&(n=o._keys.length,r=o)}}return r}},{key:"destroy",value:function(){this.$child&&(this.$child.destroy(),delete this.$child),this.query.dispose(),this.state.dispose()}},{key:"reload",value:function(){this.$child&&(this.$child.destroy(),delete this.$child),this.query.reload(),this.state.reload()}}],[{key:"getBase",value:function(t){for(var e="",r=t;r;)e=r.config.base+(!r.config.hashbang||r.$parent?"":"/#!")+e,r=r.$parent;return e}},{key:"getCanonicalPath",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?"":arguments[2],n=arguments[3],i=arguments.length<=4||void 0===arguments[4]?"":arguments[4];return""+t+e+r+(n?"?"+n:"")+(i?"#"+i:"")}},{key:"getDepth",value:function(t){for(var e=0;t.$parent;)t=t.$parent,e++;return e}}]),t}();e["default"]=h},function(t,e,r){"use strict";var n=r(5),i=r(7);t.exports={stringify:n,parse:i}},function(t,e,r){"use strict";var n=r(6),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},o={delimiter:"&",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:n.encode},a=function u(t,e,r,i,o,a,s,c,l){var f=t;if("function"==typeof s)f=s(e,f);else if(f instanceof Date)f=f.toISOString();else if(null===f){if(i)return a?a(e):e;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||n.isBuffer(f))return a?[a(e)+"="+a(f)]:[e+"="+String(f)];var p=[];if("undefined"==typeof f)return p;var d;if(Array.isArray(s))d=s;else{var h=Object.keys(f);d=c?h.sort(c):h}for(var y=0;y<d.length;++y){var v=d[y];o&&null===f[v]||(p=Array.isArray(f)?p.concat(u(f[v],r(e,v),r,i,o,a,s,c,l)):p.concat(u(f[v],e+(l?"."+v:"["+v+"]"),r,i,o,a,s,c,l)))}return p};t.exports=function(t,e){var r,n,u=t,s=e||{},c="undefined"==typeof s.delimiter?o.delimiter:s.delimiter,l="boolean"==typeof s.strictNullHandling?s.strictNullHandling:o.strictNullHandling,f="boolean"==typeof s.skipNulls?s.skipNulls:o.skipNulls,p="boolean"==typeof s.encode?s.encode:o.encode,d=p?"function"==typeof s.encoder?s.encoder:o.encoder:null,h="function"==typeof s.sort?s.sort:null,y="undefined"==typeof s.allowDots?!1:s.allowDots;if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");"function"==typeof s.filter?(n=s.filter,u=n("",u)):Array.isArray(s.filter)&&(r=n=s.filter);var v=[];if("object"!=typeof u||null===u)return"";var g;g=s.arrayFormat in i?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var b=i[g];r||(r=Object.keys(u)),h&&r.sort(h);for(var m=0;m<r.length;++m){var x=r[m];f&&null===u[x]||(v=v.concat(a(u[x],x,b,l,f,d,n,h,y)))}return v.join(c)}},function(t,e){"use strict";var r=function(){for(var t=new Array(256),e=0;256>e;++e)t[e]="%"+((16>e?"0":"")+e.toString(16)).toUpperCase();return t}();e.arrayToObject=function(t,e){for(var r=e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)"undefined"!=typeof t[n]&&(r[n]=t[n]);return r},e.merge=function(t,r,n){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];t[r]=!0}return t}if("object"!=typeof t)return[t].concat(r);var i=t;return Array.isArray(t)&&!Array.isArray(r)&&(i=e.arrayToObject(t,n)),Object.keys(r).reduce(function(t,i){var o=r[i];return Object.prototype.hasOwnProperty.call(t,i)?t[i]=e.merge(t[i],o,n):t[i]=o,t},i)},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",i=0;i<e.length;++i){var o=e.charCodeAt(i);45===o||46===o||95===o||126===o||o>=48&&57>=o||o>=65&&90>=o||o>=97&&122>=o?n+=e.charAt(i):128>o?n+=r[o]:2048>o?n+=r[192|o>>6]+r[128|63&o]:55296>o||o>=57344?n+=r[224|o>>12]+r[128|o>>6&63]+r[128|63&o]:(i+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(i)),n+=r[240|o>>18]+r[128|o>>12&63]+r[128|o>>6&63]+r[128|63&o])}return n},e.compact=function(t,r){if("object"!=typeof t||null===t)return t;var n=r||[],i=n.indexOf(t);if(-1!==i)return n[i];if(n.push(t),Array.isArray(t)){for(var o=[],a=0;a<t.length;++a)t[a]&&"object"==typeof t[a]?o.push(e.compact(t[a],n)):"undefined"!=typeof t[a]&&o.push(t[a]);return o}for(var u=Object.keys(t),s=0;s<u.length;++s){var c=u[s];t[c]=e.compact(t[c],n)}return t},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null===t||"undefined"==typeof t?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},function(t,e,r){"use strict";var n=r(6),i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:n.decode},o=function(t,e){for(var r={},n=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),i=0;i<n.length;++i){var o=n[i],a=-1===o.indexOf("]=")?o.indexOf("="):o.indexOf("]=")+1;if(-1===a)r[e.decoder(o)]="",e.strictNullHandling&&(r[e.decoder(o)]=null);else{var u=e.decoder(o.slice(0,a)),s=e.decoder(o.slice(a+1));Object.prototype.hasOwnProperty.call(r,u)?r[u]=[].concat(r[u]).concat(s):r[u]=s}}return r},a=function s(t,e,r){if(!t.length)return e;var n,i=t.shift();if("[]"===i)n=[],n=n.concat(s(t,e,r));else{n=r.plainObjects?Object.create(null):{};var o="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,a=parseInt(o,10);!isNaN(a)&&i!==o&&String(a)===o&&a>=0&&r.parseArrays&&a<=r.arrayLimit?(n=[],n[a]=s(t,e,r)):n[o]=s(t,e,r)}return n},u=function(t,e,r){if(t){var n=r.allowDots?t.replace(/\.([^\.\[]+)/g,"[$1]"):t,i=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,u=i.exec(n),s=[];if(u[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(u[1])&&!r.allowPrototypes)return;s.push(u[1])}for(var c=0;null!==(u=o.exec(n))&&c<r.depth;)c+=1,(r.plainObjects||!Object.prototype.hasOwnProperty(u[1].replace(/\[|\]/g,""))||r.allowPrototypes)&&s.push(u[1]);return u&&s.push("["+n.slice(u.index)+"]"),a(s,e,r)}};t.exports=function(t,e){var r=e||{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===t||null===t||"undefined"==typeof t)return r.plainObjects?Object.create(null):{};for(var a="string"==typeof t?o(t,r):t,s=r.plainObjects?Object.create(null):{},c=Object.keys(a),l=0;l<c.length;++l){var f=c[l],p=u(f,a[f],r);s=n.merge(s,p,r)}return n.compact(s)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){return new v(t)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.factory=a;var s=r(1),c=n(s),l=r(4),f=n(l),p=r(9),d={},h=c["default"].observable(!0),y={},v=function(){function t(e){if(o(this,t),this.ctx=e,!this.ctx.$parent){var r=window.location.href.indexOf("?");~r&&this.updateFromString(window.location.href.split("?")[1])}this.get=this.get.bind(this),this.clear=this.clear.bind(this),this.update=this.update.bind(this)}return u(t,[{key:"get",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?p.identity:arguments[2],n=this,o=this.ctx,a=this.ctx.config.depth+o.pathname();return y[a]||(y[a]={}),y[a][t]||(y[a][t]={defaultVal:e,parser:r,value:c["default"].pureComputed({read:function(){return h(),d&&d[a]&&!(0,p.isUndefined)(d[a][t])?y[a][t].parser(d[a][t]):e},write:function(e){(0,p.deepEquals)(e,this.prev)||(this.prev=e,(0,p.merge)(d,i({},a,i({},t,e)),!1),o.update(location.pathname+location.hash,o.state(),!1,n.getNonDefaultParams()[a]),h(!h()))},owner:{prev:null}})}),y[a][t].value}},{key:"getAll",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.ctx.pathname():arguments[1],r=this.ctx.config.depth+e;return t?c["default"].pureComputed({read:function(){return h(),this.getAll()},write:function(t){for(var e in t)this.get(e)(t[e])}},this):c["default"].toJS((0,p.mapKeys)(d[r]||{},function(t){return y[r]&&y[r][t]?(0,p.isUndefined)(d[r][t])?void 0:y[r][t].parser(d[r][t]):d[r][t]}))}},{key:"setDefaults",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?p.identity:arguments[1];for(var r in t)this.get(r,t[r],e)}},{key:"clear",value:function(t){"string"!=typeof t&&(t=this.ctx.pathname());var e=this.ctx.config.depth+t;for(var r in y[e]){var n=y[e][r];n.value(n.defaultVal)}}},{key:"reload",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.ctx.config.depth+this.ctx.pathname():arguments[1];if(!this.ctx.config.persistQuery||t){for(var r in d[e])y[e]&&y[e][r]&&y[e][r].value.dispose();delete d[e],delete y[e]}h(!h())}},{key:"dispose",value:function(){for(var t in d)0===t.indexOf(this.ctx.config.depth)&&this.reload(!0,t)}},{key:"update",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?this.ctx.pathname():arguments[1],r=this.ctx.config.depth+e;(0,p.deepEquals)(d[r],t)||((0,p.merge)(d,i({},r,t),!1),h(!h()))}},{key:"updateFromString",value:function(t,e){if(e){var r=this.ctx.config.depth+e;(0,p.merge)(d,i({},r,f["default"].parse(t)[r]),!1)}else(0,p.merge)(d,f["default"].parse(t),!1);h(!h())}},{key:"getNonDefaultParams",value:function(t,e){var r={},n=d;t&&(0,p.merge)(n,i({},this.ctx.config.depth+e,t),!1);for(var o in n)if(y[o]){r[o]={};for(var a in n[o]){var u=n[o][a],s=y[o][a].defaultVal;(0,p.isUndefined)(u)||(0,p.deepEquals)(u,s)||(r[o][a]=u)}}else r[o]=n[o];return r}},{key:"getFullQueryString",value:function(t,e){return f["default"].stringify(this.getNonDefaultParams(t,e))}}]),t}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){return"string"!=typeof t?t:decodeURIComponent(t.replace(/\+/g," "))}function o(t,e){if(null===t||null===e)return null===t&&null===e;if(("undefined"==typeof t?"undefined":d(t))!==("undefined"==typeof e?"undefined":d(e)))return!1;if(s(t))return s(e);if(p(t)&&p(e))return t===e;if(t.constructor===Object&&e.constructor===Object){var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;var i=!0,a=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value;if(!o(t[f],e[f]))return!1}}catch(h){a=!0,u=h}finally{try{!i&&l["return"]&&l["return"]()}finally{if(a)throw u}}return!0}if(!Array.isArray(t)||!Array.isArray(e))return t===e;if(t.length!==e.length)return!1;var y=!0,v=!1,g=void 0;try{for(var b,m=t[Symbol.iterator]();!(y=(b=m.next()).done);y=!0){var x=b.value;if(e.indexOf(x)<0)return!1}}catch(h){v=!0,g=h}finally{try{!y&&m["return"]&&m["return"]()}finally{if(v)throw g}}}function a(t,e){var r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],i=Object.keys(e),u=!0,c=!1,l=void 0;try{for(var p,d=i[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var h=p.value;s(t[h])?t[h]=r?f(e[h]):e[h]:y["default"].isWritableObservable(t[h])?o(t[h](),e[h])||t[h](e[h]):s(e[h])?t[h]=void 0:e[h].constructor===Object?(n&&(t[h]={}),a(t[h],e[h],r)):t[h]=e[h]}}catch(v){c=!0,l=v}finally{try{!u&&d["return"]&&d["return"]()}finally{if(c)throw l}}return t}function u(t){return t}function s(t){return"undefined"==typeof t}function c(t,e){var r={};return Object.keys(t).forEach(function(t){return r[t]=e(t)}),r}function l(t,e){var r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];a(t,e,r,!1)}function f(t,e){var r=void 0;if(p(t))r=e?t:y["default"].observable(t);else if(t instanceof Array){r=[];for(var n=0;n<t.length;n++)r[n]=f(t[n],!0);r=y["default"].observableArray(r)}else if(t.constructor===Object){r={};for(var i in t)r[i]=f(t[i])}return r}function p(t){return null===t||void 0===t||t.constructor===String||t.constructor===Number||t.constructor===Boolean||t instanceof Date}Object.defineProperty(e,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.decodeURLEncodedURIComponent=i,e.deepEquals=o,e.extend=a,e.identity=u,e.isUndefined=s,e.mapKeys=c,e.merge=l;var h=r(1),y=n(h)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=a["default"].observable(!1),r=a["default"].pureComputed({read:function(){return e(),history.state?history.state[t.config.depth+t.pathname()]:{}},write:function(r){if(r){var n=history.state||{},i=t.config.depth+t.pathname();(0,u.deepEquals)(r,history.state?history.state[t.config.depth+t.pathname()]:{})||(n[i]&&delete n[i],n[i]=r,history.replaceState(n,document.title),e(!e()))}}}),n=r.dispose;return r.reload=function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],r=arguments.length<=1||void 0===arguments[1]?t.config.depth+t.pathname():arguments[1];if((!t.config.persistState||e)&&history.state&&history.state[r]){var n=history.state;delete n[r]}},r.dispose=function(){for(var e in history.state)0===e.indexOf(t.config.depth)&&r.reload(!0,e);n.apply(r,arguments)},r}Object.defineProperty(e,"__esModule",{value:!0}),e.factory=i;var o=r(1),a=n(o),u=r(9)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(s){i=!0,o=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(12),s=n(u),c=r(9),l=function(){function t(e,r){i(this,t),e="!"===e[e.length-1]?e.replace("!",":child_path(.*)?"):e.replace(/\(?\*\)?/,"(.*)"),this.component=r,this._keys=[],this._regexp=(0,s["default"])(e,this._keys)}return a(t,[{key:"matches",value:function(t){var e=t.indexOf("?");return~e&&(t=t.split("?")[0]),this._regexp.exec(decodeURIComponent(t))}},{key:"parse",value:function(t){var e=void 0,r="",n={},i=t.indexOf("#");if(~i){var a=t.split("#");t=a[0],r=(0,c.decodeURLEncodedURIComponent)(a[1])}for(var u=t.indexOf("?"),s=~u?t.split("?"):[t],l=o(s,2),f=l[0],p=l[1],d=this._regexp.exec(decodeURIComponent(f)),h=1,y=d.length;y>h;++h){var v=this._keys[h-1],g=(0,c.decodeURLEncodedURIComponent)(d[h]);void 0===g&&hasOwnProperty.call(n,v.name)||("child_path"===v.name?void 0!==g&&(e="/"+g,t=t.substring(0,t.lastIndexOf(e)),f=f.substring(0,f.lastIndexOf(e))):n[v.name]=g)}return[t,n,r,f,p,e]}}]),t}();e["default"]=l},function(t,e,r){function n(t){for(var e,r=[],n=0,i=0,o="";null!=(e=b.exec(t));){var a=e[0],u=e[1],s=e.index;if(o+=t.slice(i,s),i=s+a.length,u)o+=u[1];else{var l=t[i],f=e[2],p=e[3],d=e[4],h=e[5],y=e[6],v=e[7];o&&(r.push(o),o="");var g=null!=f&&null!=l&&l!==f,m="+"===y||"*"===y,x="?"===y||"*"===y,w=e[2]||"/",O=d||h||(v?".*":"[^"+w+"]+?");r.push({name:p||n++,prefix:f||"",delimiter:w,optional:x,repeat:m,partial:g,asterisk:!!v,pattern:c(O)})}}return i<t.length&&(o+=t.substr(i)),o&&r.push(o),r}function i(t){return u(n(t))}function o(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function a(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function u(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var i="",u=r||{},s=n||{},c=s.pretty?o:encodeURIComponent,l=0;l<t.length;l++){var f=t[l];if("string"!=typeof f){var p,d=u[f.name];if(null==d){if(f.optional){f.partial&&(i+=f.prefix);continue}throw new TypeError('Expected "'+f.name+'" to be defined')}if(g(d)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(p=c(d[h]),!e[l].test(p))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(p)+"`");i+=(0===h?f.prefix:f.delimiter)+p}}else{if(p=f.asterisk?a(d):c(d),!e[l].test(p))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+p+'"');i+=f.prefix+p}}else i+=f}return i}}function s(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function c(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function l(t,e){return t.keys=e,t}function f(t){return t.sensitive?"":"i"}function p(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(t,e)}function d(t,e,r){for(var n=[],i=0;i<t.length;i++)n.push(v(t[i],e,r).source);var o=new RegExp("(?:"+n.join("|")+")",f(r));return l(o,e)}function h(t,e,r){for(var i=n(t),o=y(i,r),a=0;a<i.length;a++)"string"!=typeof i[a]&&e.push(i[a]);return l(o,e)}function y(t,e){e=e||{};for(var r=e.strict,n=e.end!==!1,i="",o=t[t.length-1],a="string"==typeof o&&/\/$/.test(o),u=0;u<t.length;u++){var c=t[u];if("string"==typeof c)i+=s(c);else{var l=s(c.prefix),p="(?:"+c.pattern+")";c.repeat&&(p+="(?:"+l+p+")*"),p=c.optional?c.partial?l+"("+p+")?":"(?:"+l+"("+p+"))?":l+"("+p+")",i+=p}}return r||(i=(a?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=n?"$":r&&a?"":"(?=\\/|$)",new RegExp("^"+i,f(e))}function v(t,e,r){return e=e||[],g(e)?r||(r={}):(r=e,e=[]),t instanceof RegExp?p(t,e):g(t)?d(t,e,r):h(t,e,r)}var g=r(13);t.exports=v,t.exports.parse=n,t.exports.compile=i,t.exports.tokensToFunction=u,t.exports.tokensToRegExp=y;var b=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,r){for(var n=a(t,e),i=c(n,2),o=i[0],u=i[1],s=r?"?"+d["default"].stringify(f["default"].toJS(r)):"";o.$parent;)u=o.config.base+u,o=o.$parent;return o?o.config.base+(!o.config.hashbang||o.$parent?"":"/#!")+u+s:"#"}function o(t,e,r){var n=e.has("path")?e.get("path"):!1,o=e.has("query")?e.get("query"):!1,u=e.has("state")?e.get("state"):!1,l={};t.href="#",l.click=function(e,i){var l=1!==s(i),p=t.hasAttribute("target"),d="external"===t.getAttribute("rel"),h=i.metaKey||i.ctrlKey||i.shiftKey;if(l||p||d||h)return!0;var y=a(r,n),v=c(y,2),g=v[0],b=v[1],m=g.update(b,f["default"].toJS(u),!0,f["default"].toJS(o));return m?(i.preventDefault(),i.stopImmediatePropagation()):g.$parent||console.error("[ko-component-router] "+n+" did not match any routes!"),!m},l.attr={href:f["default"].pureComputed(function(){return i(r,e.get("path"),o)})},n&&(l.css={"active-path":f["default"].pureComputed(function(){var t=a(r,n),e=c(t,2),i=e[0],o=e[1];return!i.isNavigating()&&""!==i.route()&&o?i.route().matches(o):!1})}),(window.requestAnimationFrame||window.setTimeout)(function(){return f["default"].applyBindingsToNode(t,l)})}function a(t,e){var r=u(t),n=e?f["default"].unwrap(e):r.canonicalPath();if(0===n.indexOf("//"))for(n=n.replace("//","/");r.$parent;)r=r.$parent;else for(;n&&n.match(/\/?\.\./i)&&r.$parent;)r=r.$parent,n=n.replace(/\/?\.\./i,"");return[r,n]}function u(t){for(;!(0,h.isUndefined)(t);){if(!(0,h.isUndefined)(t.$router))return t.$router;t=t.$parentContext}}function s(t){return t=t||window.event,null===t.which?t.button:t.which}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(s){i=!0,o=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.resolveHref=i;var l=r(1),f=n(l),p=r(4),d=n(p),h=r(9);f["default"].bindingHandlers.path={init:function(t,e,r,n,i){o.call(this,t,r,i)}},f["default"].bindingHandlers.state={init:function(t,e,r,n,i){o.call(this,t,r,i)}},f["default"].bindingHandlers.query={init:function(t,e,r,n,i){o.call(this,t,r,i)}},f["default"].bindingHandlers.path.utils={resolveHref:i}}])});