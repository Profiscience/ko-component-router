!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("knockout")):"function"==typeof define&&define.amd?define(["knockout"],t):"object"==typeof exports?exports["ko-component-router"]=t(require("knockout")):e["ko-component-router"]=t(e.ko)}(this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=r(1),o=n(i),a=r(2),u=n(a);r(14),o["default"].components.register("ko-component-router",{viewModel:u["default"],template:"<div data-bind='if: ctx.route().component'>\n      <div class=\"component-wrapper\" data-bind='component: {\n        name: ctx.route().component,\n        params: ctx\n      }'></div>\n    </div>"})},function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var r=t.element,n=f["default"].contextFor(r);return new b(r,n,f["default"].toJS(e))}function a(e){return e=e||window.event,null===e.which?e.button:e.which}function u(){}function s(e){var t=location.protocol+"//"+location.hostname;return location.port&&(t+=":"+location.port),e&&0===e.indexOf(t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(1),f=n(c),d=r(3),p=n(d),h=r(11),v=n(h),y=r(9),g=!(0,y.isUndefined)(document)&&document.ontouchstart?"touchstart":"click",b=function(){function e(t,r,n){var o=n.routes,a=n.base,s=void 0===a?"":a,l=n.hashbang,c=void 0===l?!1:l,f=n.inTransition,d=void 0===f?u:f,h=n.outTransition,y=void 0===h?u:h,b=n.persistState,m=void 0===b?!1:b,x=n.persistQuery,w=void 0===x?!1:x;i(this,e);for(var k in o)o[k]=new v["default"](k,o[k]);this.config={el:t,base:s,hashbang:c,routes:o,inTransition:d,outTransition:y,persistState:m,persistQuery:w},this.ctx=new p["default"](r,this.config),this.onpopstate=this.onpopstate.bind(this),this.onclick=this.onclick.bind(this),window.addEventListener("popstate",this.onpopstate,!1),document.addEventListener(g,this.onclick,!1);var O=!0;if(this.ctx.$parent&&(O=this.ctx.$parent.path()!==this.ctx.$parent.canonicalPath()),O){var j=this.config.hashbang&&~location.hash.indexOf("#!")?location.hash.substr(2)+location.search:location.pathname+location.search+location.hash;this.dispatch({path:j})}}return l(e,[{key:"dispatch",value:function(e){var t=e.path,r=e.state,n=e.pushState,i=void 0===n?!1:n;return 0===t.toLowerCase().indexOf(this.config.base.toLowerCase())&&(t=t.substr(this.config.base.length)||"/"),this.ctx.update(t,r,i,!1)}},{key:"onpopstate",value:function(e){var t=e.state;this.dispatch({path:location.pathname+location.search+location.hash,state:(t||{})[this.ctx.config.depth+this.ctx.pathname()]})}},{key:"onclick",value:function(e){if(!(1!==a(e)||e.metaKey||e.ctrlKey||e.shiftKey)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName){var r=t.hasAttribute("download"),n=t.hasAttribute("target"),i="external"===t.getAttribute("rel"),o=~(t.getAttribute("href")||"").indexOf("mailto:"),u=!s(t.href),l="#"===t.getAttribute("href");if(!(r||n||i||o||u||l)){var c=t.pathname+t.search+(t.hash||""),f=c,d=this.config.base.replace("/#!","");0===c.toLowerCase().indexOf(d.toLowerCase())&&(c=c.substr(d.length)),this.config.hashbang&&(c=c.replace("/#!","")),this.config.base&&f===c||this.dispatch({path:c,pushState:!0})&&e.preventDefault()}}}}},{key:"dispose",value:function(){document.removeEventListener(g,this.onclick,!1),window.removeEventListener("popstate",this.onpopstate,!1),this.ctx.destroy()}}]),e}();t["default"]={createViewModel:o}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),s=n(u),l=r(4),c=n(l),f=r(8),d=r(10),p=r(9),h=function(){function e(t,r){i(this,e),t.$router=this;for(var n=t,o=!0;n.$parentContext;){if(n=n.$parentContext,n.$router){o=!1;break}n.$router=this}o?s["default"].router=this:(this.$parent=n.$router,this.$parent.$child=this,r.base=this.$parent.pathname()),this.config=r,this.config.depth=e.getDepth(this),this.isNavigating=s["default"].observable(!0),this.route=s["default"].observable(""),this.canonicalPath=s["default"].observable(""),this.path=s["default"].observable(""),this.pathname=s["default"].observable(""),this.hash=s["default"].observable(""),this.params={},this.query=(0,f.factory)(this),this.state=(0,d.factory)(this),this._beforeNavigateCallbacks=[]}return a(e,[{key:"update",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.canonicalPath():arguments[0],r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this,i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],a=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],u=this.resolveUrl(t),l=this.getRouteForUrl(u),f=""===this.route();if(!l){var d;return this.$parent?(d=this.$parent).update.apply(d,arguments):!1}var h=this.toJS(),v=l.parse(u),y=o(v,6),g=y[0],b=y[1],m=y[2],x=y[3],w=y[4],k=y[5],O=this.pathname()===x,j=Promise.resolve(!0);return O||f||(j=this.runBeforeNavigateCallbacks(),this.isNavigating(!0),this.reload()),j.then(function(t){if(!t)return Promise.resolve(!1);n._beforeNavigateCallbacks=[],!a&&w&&(a=c["default"].parse(w)[n.config.depth+x]);var o=e.getCanonicalPath(n.getBase().replace(/\/$/,""),x,k,n.query.getFullQueryString(a,x),m),u={route:l,path:g,pathname:x,canonicalPath:o,hash:m,params:b,query:a};return r===!1&&O?(0,p.extend)(u,{state:h.state},!1):!n.config.persistState&&r&&(u.state=r),n.config.persistState&&(u.state=n.state()),history[i?"pushState":"replaceState"](history.state,document.title,""===o?n.getBase():o),new Promise(function(e){function t(t){var r=this,n=this.config.el.getElementsByClassName("component-wrapper")[0];delete u.query,(0,p.extend)(this,u),a&&this.query.update(a,x),this.isNavigating(!1),s["default"].tasks.runEarly(),e(!0),t&&s["default"].tasks.schedule(function(){return r.config.inTransition(n,h,u)})}f?t.call(n,!0):O?n.$child?(n.$child.update(k||"/",{},!1,{}),t.call(n)):t.call(n):(n.config.outTransition(n.config.el,h,u,t.bind(n)),4!==n.config.outTransition.length&&t.call(n,!0))})})}},{key:"addBeforeNavigateCallback",value:function(e){this._beforeNavigateCallbacks.push(e)}},{key:"runBeforeNavigateCallbacks",value:function(){function e(t){return new Promise(function(r){if(0===t.length)return r(!0);var n=t.shift(),i=function(){var n=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];return n?e(t).then(r):r(!1)};if(1===n.length)n(i);else{var o=n();(0,p.isUndefined)(o)||"function"!=typeof o.then?i(o):o.then(i)}})}for(var t=this,r=[];t;)r=t._beforeNavigateCallbacks.concat(r),t=t.$child;return e(r)}},{key:"getRouteForUrl",value:function(e){var t=e.split("#")[0].split("?")[0],r=void 0,n=1/0;for(var i in this.config.routes){var o=this.config.routes[i];if(o.matches(t)){if(0===o._keys.length)return o;(n===1/0||o._keys.length<n&&".*"!==o._keys[0].pattern)&&(n=o._keys.length,r=o)}}return r}},{key:"destroy",value:function(){this.$child&&(this.$child.destroy(),delete this.$child),this.query.dispose(),this.state.dispose()}},{key:"reload",value:function(){this.$child&&(this.$child.destroy(),delete this.$child),this.query.reload(),this.state.reload()}},{key:"resolveUrl",value:function(e){var t=(e+"").replace("/#!","");if(0===t.indexOf("./"))t=t.replace("./","/");else for(var r=this;r&&t.indexOf(r.config.base)>-1;)t=t.replace(r.config.base,""),r=r.$parent;return t}},{key:"toJS",value:function(){return s["default"].toJS({route:this.route,path:this.path,pathname:this.pathname,canonicalPath:this.canonicalPath,hash:this.hash,state:this.state,params:this.params,query:this.query.getAll(!1,this.pathname())})}},{key:"getBase",value:function(){for(var e="",t=this;t;)e=t.config.base+(!t.config.hashbang||t.$parent?"":"/#!")+e,t=t.$parent;return e}}],[{key:"getCanonicalPath",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?"":arguments[2],n=arguments[3],i=arguments.length<=4||void 0===arguments[4]?"":arguments[4];return""+e+t+r+(n?"?"+n:"")+(i?"#"+i:"")}},{key:"getDepth",value:function(e){for(var t=0;e.$parent;)e=e.$parent,t++;return t}}]),e}();t["default"]=h},function(e,t,r){"use strict";var n=r(5),i=r(7);e.exports={stringify:n,parse:i}},function(e,t,r){"use strict";var n=r(6),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o={delimiter:"&",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:n.encode},a=function u(e,t,r,i,o,a,s,l,c){var f=e;if("function"==typeof s)f=s(t,f);else if(f instanceof Date)f=f.toISOString();else if(null===f){if(i)return a?a(t):t;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||n.isBuffer(f))return a?[a(t)+"="+a(f)]:[t+"="+String(f)];var d=[];if("undefined"==typeof f)return d;var p;if(Array.isArray(s))p=s;else{var h=Object.keys(f);p=l?h.sort(l):h}for(var v=0;v<p.length;++v){var y=p[v];o&&null===f[y]||(d=Array.isArray(f)?d.concat(u(f[y],r(t,y),r,i,o,a,s,l,c)):d.concat(u(f[y],t+(c?"."+y:"["+y+"]"),r,i,o,a,s,l,c)))}return d};e.exports=function(e,t){var r,n,u=e,s=t||{},l="undefined"==typeof s.delimiter?o.delimiter:s.delimiter,c="boolean"==typeof s.strictNullHandling?s.strictNullHandling:o.strictNullHandling,f="boolean"==typeof s.skipNulls?s.skipNulls:o.skipNulls,d="boolean"==typeof s.encode?s.encode:o.encode,p=d?"function"==typeof s.encoder?s.encoder:o.encoder:null,h="function"==typeof s.sort?s.sort:null,v="undefined"==typeof s.allowDots?!1:s.allowDots;if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");"function"==typeof s.filter?(n=s.filter,u=n("",u)):Array.isArray(s.filter)&&(r=n=s.filter);var y=[];if("object"!=typeof u||null===u)return"";var g;g=s.arrayFormat in i?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var b=i[g];r||(r=Object.keys(u)),h&&r.sort(h);for(var m=0;m<r.length;++m){var x=r[m];f&&null===u[x]||(y=y.concat(a(u[x],x,b,c,f,p,n,h,v)))}return y.join(l)}},function(e,t){"use strict";var r=function(){for(var e=new Array(256),t=0;256>t;++t)e[t]="%"+((16>t?"0":"")+t.toString(16)).toUpperCase();return e}();t.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!=typeof e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,n){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];e[r]=!0}return e}if("object"!=typeof e)return[e].concat(r);var i=e;return Array.isArray(e)&&!Array.isArray(r)&&(i=t.arrayToObject(e,n)),Object.keys(r).reduce(function(e,i){var o=r[i];return Object.prototype.hasOwnProperty.call(e,i)?e[i]=t.merge(e[i],o,n):e[i]=o,e},i)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",i=0;i<t.length;++i){var o=t.charCodeAt(i);45===o||46===o||95===o||126===o||o>=48&&57>=o||o>=65&&90>=o||o>=97&&122>=o?n+=t.charAt(i):128>o?n+=r[o]:2048>o?n+=r[192|o>>6]+r[128|63&o]:55296>o||o>=57344?n+=r[224|o>>12]+r[128|o>>6&63]+r[128|63&o]:(i+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(i)),n+=r[240|o>>18]+r[128|o>>12&63]+r[128|o>>6&63]+r[128|63&o])}return n},t.compact=function(e,r){if("object"!=typeof e||null===e)return e;var n=r||[],i=n.indexOf(e);if(-1!==i)return n[i];if(n.push(e),Array.isArray(e)){for(var o=[],a=0;a<e.length;++a)e[a]&&"object"==typeof e[a]?o.push(t.compact(e[a],n)):"undefined"!=typeof e[a]&&o.push(e[a]);return o}for(var u=Object.keys(e),s=0;s<u.length;++s){var l=u[s];e[l]=t.compact(e[l],n)}return e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null===e||"undefined"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){"use strict";var n=r(6),i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:n.decode},o=function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0;i<n.length;++i){var o=n[i],a=-1===o.indexOf("]=")?o.indexOf("="):o.indexOf("]=")+1;if(-1===a)r[t.decoder(o)]="",t.strictNullHandling&&(r[t.decoder(o)]=null);else{var u=t.decoder(o.slice(0,a)),s=t.decoder(o.slice(a+1));Object.prototype.hasOwnProperty.call(r,u)?r[u]=[].concat(r[u]).concat(s):r[u]=s}}return r},a=function s(e,t,r){if(!e.length)return t;var n,i=e.shift();if("[]"===i)n=[],n=n.concat(s(e,t,r));else{n=r.plainObjects?Object.create(null):{};var o="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,a=parseInt(o,10);!isNaN(a)&&i!==o&&String(a)===o&&a>=0&&r.parseArrays&&a<=r.arrayLimit?(n=[],n[a]=s(e,t,r)):n[o]=s(e,t,r)}return n},u=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^\.\[]+)/g,"[$1]"):e,i=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,u=i.exec(n),s=[];if(u[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(u[1])&&!r.allowPrototypes)return;s.push(u[1])}for(var l=0;null!==(u=o.exec(n))&&l<r.depth;)l+=1,(r.plainObjects||!Object.prototype.hasOwnProperty(u[1].replace(/\[|\]/g,""))||r.allowPrototypes)&&s.push(u[1]);return u&&s.push("["+n.slice(u.index)+"]"),a(s,t,r)}};e.exports=function(e,t){var r=t||{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===e||null===e||"undefined"==typeof e)return r.plainObjects?Object.create(null):{};for(var a="string"==typeof e?o(e,r):e,s=r.plainObjects?Object.create(null):{},l=Object.keys(a),c=0;c<l.length;++c){var f=l[c],d=u(f,a[f],r);s=n.merge(s,d,r)}return n.compact(s)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return new y(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.factory=a;var s=r(1),l=n(s),c=r(4),f=n(c),d=r(9),p={},h=l["default"].observable(!0),v={},y=function(){function e(t){if(o(this,e),this.ctx=t,!this.ctx.$parent){var r=window.location.href.indexOf("?");~r&&this.updateFromString(window.location.href.split("?")[1])}this.get=this.get.bind(this),this.clear=this.clear.bind(this),this.update=this.update.bind(this)}return u(e,[{key:"get",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?d.identity:arguments[2],n=this,o=this.ctx,a=this.ctx.config.depth+o.pathname();return v[a]||(v[a]={}),v[a][e]||(v[a][e]={defaultVal:t,parser:r,value:l["default"].pureComputed({read:function(){return h(),p&&p[a]&&!(0,d.isUndefined)(p[a][e])?v[a][e].parser(p[a][e]):t},write:function(t){var r=location,u=r.pathname,s=r.hash;(0,d.deepEquals)(t,this.prev)||(this.prev=t,(0,d.merge)(p,i({},a,i({},e,t)),!1),o.update(u+s,o.state(),!1,n.getNonDefaultParams()[a]).then(function(){return h(!h())}))},owner:{prev:null}})}),v[a][e].value}},{key:"getAll",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.ctx.pathname():arguments[1],r=this.ctx.config.depth+t;return e?l["default"].pureComputed({read:function(){return h(),this.getAll()},write:function(e){for(var t in e)this.get(t)(e[t])}},this):l["default"].toJS((0,d.mapKeys)(p[r]||{},function(e){return v[r]&&v[r][e]?(0,d.isUndefined)(p[r][e])?void 0:v[r][e].parser(p[r][e]):p[r][e]}))}},{key:"setDefaults",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?d.identity:arguments[1];for(var r in e)this.get(r,e[r],t)}},{key:"clear",value:function(e){"string"!=typeof e&&(e=this.ctx.pathname());var t=this.ctx.config.depth+e;for(var r in v[t]){var n=v[t][r];n.value(n.defaultVal)}}},{key:"reload",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.ctx.config.depth+this.ctx.pathname():arguments[1];if(!this.ctx.config.persistQuery||e){for(var r in p[t])v[t]&&v[t][r]&&v[t][r].value.dispose();delete p[t],delete v[t]}h(!h())}},{key:"dispose",value:function(){for(var e in p)0===e.indexOf(this.ctx.config.depth)&&this.reload(!0,e)}},{key:"update",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.ctx.pathname():arguments[1],r=this.ctx.config.depth+t;(0,d.deepEquals)(p[r],e)||((0,d.merge)(p,i({},r,e),!1),h(!h()))}},{key:"updateFromString",value:function(e,t){if(t){var r=this.ctx.config.depth+t;(0,d.merge)(p,i({},r,f["default"].parse(e)[r]),!1)}else(0,d.merge)(p,f["default"].parse(e),!1);h(!h())}},{key:"getNonDefaultParams",value:function(e,t){var r={},n=p;e&&(0,d.merge)(n,i({},this.ctx.config.depth+t,e),!1);for(var o in n)if(v[o]){r[o]={};for(var a in n[o]){var u=n[o][a],s=v[o][a],l=s&&s.defaultVal;(0,d.isUndefined)(u)||(0,d.deepEquals)(u,l)||(r[o][a]=u)}}else r[o]=n[o];return r}},{key:"getFullQueryString",value:function(e,t){return f["default"].stringify(this.getNonDefaultParams(e,t))}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){return"string"!=typeof e?e:decodeURIComponent(e.replace(/\+/g," "))}function o(e,t){if(null===e||null===t)return null===e&&null===t;if(("undefined"==typeof e?"undefined":p(e))!==("undefined"==typeof t?"undefined":p(t)))return!1;if(s(e))return s(t);if(d(e)&&d(t))return e===t;if(e.constructor===Object&&t.constructor===Object){var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;var i=!0,a=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value;if(!o(e[f],t[f]))return!1}}catch(h){a=!0,u=h}finally{try{!i&&c["return"]&&c["return"]()}finally{if(a)throw u}}return!0}if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;var v=!0,y=!1,g=void 0;try{for(var b,m=e[Symbol.iterator]();!(v=(b=m.next()).done);v=!0){var x=b.value;if(t.indexOf(x)<0)return!1}}catch(h){y=!0,g=h}finally{try{!v&&m["return"]&&m["return"]()}finally{if(y)throw g}}}function a(e,t){var r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],i=Object.keys(t),u=!0,l=!1,c=void 0;try{for(var d,p=i[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var h=d.value;s(e[h])?e[h]=r?f(t[h]):t[h]:v["default"].isWritableObservable(e[h])?o(e[h](),t[h])||e[h](t[h]):s(t[h])?e[h]=void 0:t[h].constructor===Object?(n&&(e[h]={}),a(e[h],t[h],r)):e[h]=t[h]}}catch(y){l=!0,c=y}finally{try{!u&&p["return"]&&p["return"]()}finally{if(l)throw c}}return e}function u(e){return e}function s(e){return"undefined"==typeof e}function l(e,t){var r={};return Object.keys(e).forEach(function(e){return r[e]=t(e)}),r}function c(e,t){var r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];a(e,t,r,!1)}function f(e,t){var r=void 0;if(d(e))r=t?e:v["default"].observable(e);else if(e instanceof Array){r=[];for(var n=0;n<e.length;n++)r[n]=f(e[n],!0);r=v["default"].observableArray(r)}else if(e.constructor===Object){r={};for(var i in e)r[i]=f(e[i])}return r}function d(e){return null===e||void 0===e||e.constructor===String||e.constructor===Number||e.constructor===Boolean||e instanceof Date}Object.defineProperty(t,"__esModule",{value:!0});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.decodeURLEncodedURIComponent=i,t.deepEquals=o,t.extend=a,t.identity=u,t.isUndefined=s,t.mapKeys=l,t.merge=c;var h=r(1),v=n(h)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=a["default"].observable(!1),r=a["default"].pureComputed({read:function(){return t(),history.state?history.state[e.config.depth+e.pathname()]:{}},write:function(r){if(r){var n=history.state||{},i=e.config.depth+e.pathname();(0,u.deepEquals)(r,history.state?history.state[e.config.depth+e.pathname()]:{})||(n[i]&&delete n[i],n[i]=r,history.replaceState(n,document.title),t(!t()))}}}),n=r.dispose;return r.reload=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],r=arguments.length<=1||void 0===arguments[1]?e.config.depth+e.pathname():arguments[1];if((!e.config.persistState||t)&&history.state&&history.state[r]){var n=history.state;delete n[r]}},r.dispose=function(){for(var t in history.state)0===t.indexOf(e.config.depth)&&r.reload(!0,t);n.apply(r,arguments)},r}Object.defineProperty(t,"__esModule",{value:!0}),t.factory=i;var o=r(1),a=n(o),u=r(9)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(12),s=n(u),l=r(9),c=function(){function e(t,r){i(this,e),t="!"===t[t.length-1]?t.replace("!",":child_path(.*)?"):t.replace(/\(?\*\)?/,"(.*)"),this.component=r,this._keys=[],this._regexp=(0,s["default"])(t,this._keys)}return a(e,[{key:"matches",value:function(e){var t=e.indexOf("?");return~t&&(e=e.split("?")[0]),this._regexp.exec(decodeURIComponent(e))}},{key:"parse",value:function(e){var t=void 0,r="",n={},i=e.indexOf("#");if(~i){var a=e.split("#");e=a[0],r=(0,l.decodeURLEncodedURIComponent)(a[1])}for(var u=e.indexOf("?"),s=~u?e.split("?"):[e],c=o(s,2),f=c[0],d=c[1],p=this._regexp.exec(decodeURIComponent(f)),h=1,v=p.length;v>h;++h){var y=this._keys[h-1],g=(0,l.decodeURLEncodedURIComponent)(p[h]);!(0,l.isUndefined)(g)&&hasOwnProperty.call(n,y.name)||("child_path"===y.name?(0,l.isUndefined)(g)||(t="/"+g,e=e.substring(0,e.lastIndexOf(t)),f=f.substring(0,f.lastIndexOf(t))):n[y.name]=g)}return[e,n,r,f,d,t]}}]),e}();t["default"]=c},function(e,t,r){function n(e){for(var t,r=[],n=0,i=0,o="";null!=(t=b.exec(e));){var a=t[0],u=t[1],s=t.index;if(o+=e.slice(i,s),i=s+a.length,u)o+=u[1];else{var c=e[i],f=t[2],d=t[3],p=t[4],h=t[5],v=t[6],y=t[7];o&&(r.push(o),o="");var g=null!=f&&null!=c&&c!==f,m="+"===v||"*"===v,x="?"===v||"*"===v,w=t[2]||"/",k=p||h||(y?".*":"[^"+w+"]+?");r.push({name:d||n++,prefix:f||"",delimiter:w,optional:x,repeat:m,partial:g,asterisk:!!y,pattern:l(k)})}}return i<e.length&&(o+=e.substr(i)),o&&r.push(o),r}function i(e){return u(n(e))}function o(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function u(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$"));return function(r,n){for(var i="",u=r||{},s=n||{},l=s.pretty?o:encodeURIComponent,c=0;c<e.length;c++){var f=e[c];if("string"!=typeof f){var d,p=u[f.name];if(null==p){if(f.optional){f.partial&&(i+=f.prefix);continue}throw new TypeError('Expected "'+f.name+'" to be defined')}if(g(p)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var h=0;h<p.length;h++){if(d=l(p[h]),!t[c].test(d))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(d)+"`");i+=(0===h?f.prefix:f.delimiter)+d}}else{if(d=f.asterisk?a(p):l(p),!t[c].test(d))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+d+'"');i+=f.prefix+d}}else i+=f}return i}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function f(e){return e.sensitive?"":"i"}function d(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}function p(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(y(e[i],t,r).source);var o=new RegExp("(?:"+n.join("|")+")",f(r));return c(o,t)}function h(e,t,r){for(var i=n(e),o=v(i,r),a=0;a<i.length;a++)"string"!=typeof i[a]&&t.push(i[a]);return c(o,t)}function v(e,t){t=t||{};for(var r=t.strict,n=t.end!==!1,i="",o=e[e.length-1],a="string"==typeof o&&/\/$/.test(o),u=0;u<e.length;u++){var l=e[u];if("string"==typeof l)i+=s(l);else{var c=s(l.prefix),d="(?:"+l.pattern+")";l.repeat&&(d+="(?:"+c+d+")*"),d=l.optional?l.partial?c+"("+d+")?":"(?:"+c+"("+d+"))?":c+"("+d+")",i+=d}}return r||(i=(a?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=n?"$":r&&a?"":"(?=\\/|$)",new RegExp("^"+i,f(t))}function y(e,t,r){return t=t||[],g(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?d(e,t):g(e)?p(e,t,r):h(e,t,r)}var g=r(13);e.exports=y,e.exports.parse=n,e.exports.compile=i,e.exports.tokensToFunction=u,e.exports.tokensToRegExp=v;var b=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,r){for(var n=a(e,t),i=l(n,2),o=i[0],u=i[1],s=r?"?"+p["default"].stringify(f["default"].toJS(r)):"";o.$parent;)u=o.config.base+u,o=o.$parent;return o?o.config.base+(!o.config.hashbang||o.$parent?"":"/#!")+u+s:"#"}function o(e,t,r){var n=t.has("path")?t.get("path"):!1,o=t.has("query")?t.get("query"):!1,u=t.has("state")?t.get("state"):!1,c={};e.href="#",c.click=function(t,i){var c=1!==s(i),d=e.hasAttribute("target"),p="external"===e.getAttribute("rel"),h=i.metaKey||i.ctrlKey||i.shiftKey;if(c||d||p||h)return!0;var v=a(r,n),y=l(v,2),g=y[0],b=y[1],m=g.update(b,f["default"].toJS(u),!0,f["default"].toJS(o));return m?(i.preventDefault(),i.stopImmediatePropagation()):g.$parent||console.error("[ko-component-router] "+n+" did not match any routes!"),!m},c.attr={href:f["default"].pureComputed(function(){return i(r,t.get("path"),o)})},n&&(c.css={"active-path":f["default"].pureComputed(function(){var e=a(r,n),t=l(e,2),i=t[0],o=t[1];return!i.isNavigating()&&""!==i.route()&&o?i.route().matches(o):!1})}),(window.requestAnimationFrame||window.setTimeout)(function(){return f["default"].applyBindingsToNode(e,c)})}function a(e,t){var r=u(e),n=t?f["default"].unwrap(t):r.canonicalPath();if(0===n.indexOf("//"))for(n=n.replace("//","/");r.$parent;)r=r.$parent;else for(;n&&n.match(/\/?\.\./i)&&r.$parent;)r=r.$parent,n=n.replace(/\/?\.\./i,"");return[r,n]}function u(e){for(;!(0,h.isUndefined)(e);){if(!(0,h.isUndefined)(e.$router))return e.$router;e=e.$parentContext}}function s(e){return e=e||window.event,null===e.which?e.button:e.which}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.resolveHref=i;var c=r(1),f=n(c),d=r(4),p=n(d),h=r(9);f["default"].bindingHandlers.path={init:function(e,t,r,n,i){o.call(this,e,r,i)}},f["default"].bindingHandlers.state={init:function(e,t,r,n,i){o.call(this,e,r,i)}},f["default"].bindingHandlers.query={init:function(e,t,r,n,i){o.call(this,e,r,i)}},f["default"].bindingHandlers.path.utils={resolveHref:i}}])});